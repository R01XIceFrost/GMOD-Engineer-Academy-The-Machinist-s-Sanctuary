@name Main Engine Simple Tank
@inputs Engine_WL:wirelink Fuel_WL:wirelink
@outputs Turn Reverse #Throttle #Fuel #Engine 
@trigger none
@strict


#[

Special Thanks to Marquis Denneisk, The Peak Comedy (spartanoises.226) 
& teemeefe (autoupdate) from the Wiremod Discord for showing different ways
to throttle the engine based on my E2 prototypes & explanation for the errors/improvements :D

]#

#September 24 - 28 2025

# settings
MAGNITUDE = 0.5
Direction = 0
MINIMUM = -10
MAX = 100
Throttle = 0

#-----------------

event keyPressed(Player:entity, Key:string, Down:number, KeyBind:string) { #I used KeyBind for universal keys (incase of different keyboard users) instead of Key:string
    if (Player:inVehicle()) { #condition #1 checked if player is sitting on the chair
        #Forward & Backward Logic
        if (KeyBind == "forward") { 
            Direction = Down # Since Down is either 1 or 0, we can use this trick
            } elseif (KeyBind == "back") {
            Direction = -Down
        }
        #---------------------------------------------------------------------------------
        
        #Turning Logic for the Thruster (-1 or 1 or depending location of your Thruster!)
        if (KeyBind == "moveleft") {
            Result = -Down # -1 (Modify this code -Down to Down if it's not turning the right direction)
            } elseif (KeyBind == "moveright") {
            Result = Down # 1 (Modify this code Down to -Down if it's not turning the right direction)
        }         
    }
}
            
event tick() {
    
Throttle += Direction * MAGNITUDE
Turn = Result 
Throttle = clamp(Throttle, MINIMUM, MAX) #Clamps the Speed -10 to 100 according to the settings

    if (Throttle < 0) { #Activate the back thruster if speed is below 0!
        Reverse = -1 # (Modify this code -1 to 1 if it's not reversing the back of base plate direction)
     } else {
        Reverse = 0
    }   
    
Owner = owner():inVehicle()

if (Owner) { #Activate the Fuel Tank when sitting
    Fuel = 1
    if (!timerExists("Engine")) { #Activate the Engine next
        timer("Engine", 1, 0, function() {
            Engine = 1            
            })
        }
    } else { #Stop the Fuel & Engine activation when not sitting
        stoptimer("Engine")
        Fuel = 0
        Engine = 0        
    }
    
Fuel_WL["Active", number] = Fuel
Engine_WL["Active", number] = Engine
Engine_WL["Throttle", number] = Throttle
     
}
